"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generateStory";
exports.ids = ["pages/api/generateStory"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgenerateStory&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgenerateStory.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgenerateStory&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgenerateStory.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_generateStory_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/generateStory.ts */ \"(api)/./src/pages/api/generateStory.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_generateStory_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_generateStory_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_generateStory_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_generateStory_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generateStory\",\n        pathname: \"/api/generateStory\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_generateStory_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlU3RvcnkmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlMkZwYWdlcyUyRmFwaSUyRmdlbmVyYXRlU3RvcnkudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNkQ7QUFDN0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDREQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw0REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94by1wMi1yZXZpc2VkLz8yNWY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL2dlbmVyYXRlU3RvcnkudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZVN0b3J5XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGVTdG9yeVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgenerateStory&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgenerateStory.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/generateStory.ts":
/*!****************************************!*\
  !*** ./src/pages/api/generateStory.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAI({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const { market, need, archetype, tone, context, brand } = req.body;\n        // Validate required fields\n        if (!market || !need || !archetype || !tone || !context) {\n            return res.status(400).json({\n                error: \"Missing required fields: market, need, archetype, tone, context\"\n            });\n        }\n        // Load market-specific tone data\n        const marketTonesModule = await __webpack_require__.e(/*! import() */ \"_api_src_lib_marketTone_json\").then(__webpack_require__.t.bind(__webpack_require__, /*! @/lib/marketTone.json */ \"(api)/./src/lib/marketTone.json\", 19));\n        const marketTones = marketTonesModule.default;\n        const marketData = marketTones[market] || marketTones.ng;\n        const toneConfig = marketData.tones.find((t)=>t.name === tone);\n        if (!toneConfig) {\n            return res.status(400).json({\n                error: `Tone '${tone}' not found for market '${market}'`\n            });\n        }\n        // Build culturally-aware prompt\n        const marketContext = {\n            ng: 'Use Nigerian English, street energy, \"No wahala\" spirit, vibrant Lagos culture',\n            uk: \"Use British English, working-class authenticity, pub culture references\",\n            fr: \"Use formal French style, measured restraint, cultural elegance\"\n        };\n        const prompt = `\nYou are an expert storyteller creating culturally grounded narratives for ${market.toUpperCase()} market.\n\nINPUTS:\n- Market: ${market.toUpperCase()} (${marketContext[market]})\n- Motivational Need (Maslow): ${need}\n- Story Archetype: ${archetype}\n- Tone: ${tone} (Keywords: ${toneConfig.keywords.join(\", \")})\n- Visual Style: ${toneConfig.visualDescriptors.join(\", \")}\n- Context/Scene: ${context}\n${brand ? `- Brand: ${brand.name}` : \"\"}\n\nTASK:\nCreate a compelling 30-second narrative with these TWO components:\n\n1. **story** (string): A flowing narrative paragraph (150-200 words) that tells the complete story in prose format. Use culturally appropriate language, idioms, and references for the ${market} market.\n\n2. **beatSheet** (array): Break the story into 4-6 cinematic scenes using standard beat sheet structure:\n   - Opening Image\n   - Setup\n   - Catalyst\n   - Midpoint\n   - Climax\n   - Final Image\n\nEach scene object must include:\n{\n  \"beat\": \"Opening Image\",\n  \"description\": \"Detailed scene description (2-3 sentences)\",\n  \"visualCues\": [\"Specific visual element 1\", \"Specific visual element 2\", \"Specific visual element 3\"],\n  \"emotion\": \"Primary emotion of this beat\",\n  \"duration\": \"5s\" (estimate in seconds)\n}\n\n3. **metadata** object with: title (catchy, market-appropriate), totalBeats, estimatedDuration\n\nReturn ONLY valid JSON in this EXACT structure:\n{\n  \"story\": \"Full narrative paragraph here...\",\n  \"beatSheet\": [...array of scene objects...],\n  \"metadata\": {\n    \"title\": \"Story Title\",\n    \"market\": \"${market}\",\n    \"archetype\": \"${archetype}\",\n    \"tone\": \"${tone}\",\n    \"totalBeats\": 5,\n    \"estimatedDuration\": \"30s\"\n  }\n}\n\nCRITICAL: Make visual cues specific and actionable for image generation. Include cultural details appropriate for ${market} market.\n`;\n        console.log(\"Generating story for market:\", market, \"with tone:\", tone);\n        const completion = await openai.chat.completions.create({\n            model: \"gpt-4o\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You are an expert storyteller specializing in culturally grounded narratives. You create stories that resonate authentically with specific markets while maintaining universal emotional appeal. Always return valid JSON.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            response_format: {\n                type: \"json_object\"\n            },\n            temperature: 0.8\n        });\n        const content = completion.choices[0].message.content;\n        if (!content) {\n            throw new Error(\"No content returned from OpenAI\");\n        }\n        const generated = JSON.parse(content);\n        // Validate structure\n        if (!generated.story || !generated.beatSheet || !generated.metadata) {\n            throw new Error(\"Invalid story structure returned from GPT\");\n        }\n        console.log(`âœ“ Story generated: \"${generated.metadata.title}\" with ${generated.beatSheet.length} beats`);\n        res.status(200).json({\n            success: true,\n            ...generated,\n            toneConfig\n        });\n    } catch (error) {\n        console.error(\"Story generation error:\", error);\n        if (error instanceof Error) {\n            return res.status(500).json({\n                error: \"Failed to generate story\",\n                details: error.message\n            });\n        }\n        res.status(500).json({\n            error: \"Failed to generate story\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU07UUFDbEI7UUFFQSxNQUFNQyxZQUE0QkMsS0FBS0MsS0FBSyxDQUFDVDtRQUU3QyxxQkFBcUI7UUFDckIsSUFBSSxDQUFDTyxVQUFVRyxLQUFLLElBQUksQ0FBQ0gsVUFBVUksU0FBUyxJQUFJLENBQUNKLFVBQVVLLFFBQVEsRUFBRTtZQUNuRSxNQUFNLElBQUlOLE1BQU07UUFDbEI7UUFFQWYsUUFBUUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLEVBQUVlLFVBQVVLLFFBQVEsQ0FBQ0MsS0FBSyxDQUFDLE9BQU8sRUFBRU4sVUFBVUksU0FBUyxDQUFDRyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBRXZHckQsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQm1ELFNBQVM7WUFDVCxHQUFHUixTQUFTO1lBQ1o3QjtRQUNGO0lBRUYsRUFBRSxPQUFPYixPQUFPO1FBQ2QwQixRQUFRMUIsS0FBSyxDQUFDLDJCQUEyQkE7UUFFekMsSUFBSUEsaUJBQWlCeUMsT0FBTztZQUMxQixPQUFPN0MsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87Z0JBQ1BtRCxTQUFTbkQsTUFBTXdDLE9BQU87WUFDeEI7UUFDRjtRQUVBNUMsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQTJCO0lBQzNEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94by1wMi1yZXZpc2VkLy4vc3JjL3BhZ2VzL2FwaS9nZW5lcmF0ZVN0b3J5LnRzPzBhNTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT3BlbkFJIH0gZnJvbSAnb3BlbmFpJztcbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcblxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkhLFxufSk7XG5cbmludGVyZmFjZSBHZW5lcmF0ZVN0b3J5UmVxdWVzdCB7XG4gIG1hcmtldDogc3RyaW5nO1xuICBuZWVkOiBzdHJpbmc7XG4gIGFyY2hldHlwZTogc3RyaW5nO1xuICB0b25lOiBzdHJpbmc7XG4gIGNvbnRleHQ6IHN0cmluZztcbiAgYnJhbmQ/OiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHBhbGV0dGU/OiBzdHJpbmdbXTtcbiAgICBmb250cz86IHN0cmluZ1tdO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgU2NlbmUge1xuICBiZWF0OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHZpc3VhbEN1ZXM6IHN0cmluZ1tdO1xuICBlbW90aW9uPzogc3RyaW5nO1xuICBkdXJhdGlvbj86IHN0cmluZztcbn1cblxuLy8gTkVXOiBNYXRjaCBQMiBkb2N1bWVudGF0aW9uIHN0cnVjdHVyZVxuaW50ZXJmYWNlIEdlbmVyYXRlZFN0b3J5IHtcbiAgc3Rvcnk6IHN0cmluZzsgICAgICAgICAgIC8vIEZ1bGwgbmFycmF0aXZlIGFzIHByb3NlXG4gIGJlYXRTaGVldDogU2NlbmVbXTsgICAgICAvLyBTdHJ1Y3R1cmVkIHNjZW5lc1xuICBtZXRhZGF0YToge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbWFya2V0OiBzdHJpbmc7XG4gICAgYXJjaGV0eXBlOiBzdHJpbmc7XG4gICAgdG9uZTogc3RyaW5nO1xuICAgIHRvdGFsQmVhdHM6IG51bWJlcjtcbiAgICBlc3RpbWF0ZWREdXJhdGlvbjogc3RyaW5nO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgTWFya2V0VG9uZSB7XG4gIG5hbWU6IHN0cmluZztcbiAga2V5d29yZHM6IHN0cmluZ1tdO1xuICBhcmNoZXR5cGVMaW5rczogc3RyaW5nW107XG4gIHZpc3VhbERlc2NyaXB0b3JzOiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIE1hcmtldERhdGEge1xuICBtYXJrZXQ6IHN0cmluZztcbiAgdG9uZXM6IE1hcmtldFRvbmVbXTtcbiAgY29tcGxpYW5jZToge1xuICAgIHdjYWc6IHN0cmluZztcbiAgICBzdHJhcDogYm9vbGVhbjtcbiAgfTtcbn1cblxuaW50ZXJmYWNlIE1hcmtldFRvbmVzRGF0YSB7XG4gIFtrZXk6IHN0cmluZ106IE1hcmtldERhdGE7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBtYXJrZXQsIG5lZWQsIGFyY2hldHlwZSwgdG9uZSwgY29udGV4dCwgYnJhbmQgfTogR2VuZXJhdGVTdG9yeVJlcXVlc3QgPSByZXEuYm9keTtcblxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGlmICghbWFya2V0IHx8ICFuZWVkIHx8ICFhcmNoZXR5cGUgfHwgIXRvbmUgfHwgIWNvbnRleHQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiBtYXJrZXQsIG5lZWQsIGFyY2hldHlwZSwgdG9uZSwgY29udGV4dCcgXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBMb2FkIG1hcmtldC1zcGVjaWZpYyB0b25lIGRhdGFcbiAgICBjb25zdCBtYXJrZXRUb25lc01vZHVsZSA9IGF3YWl0IGltcG9ydCgnQC9saWIvbWFya2V0VG9uZS5qc29uJyk7XG4gICAgY29uc3QgbWFya2V0VG9uZXMgPSBtYXJrZXRUb25lc01vZHVsZS5kZWZhdWx0IGFzIE1hcmtldFRvbmVzRGF0YTtcbiAgICBcbiAgICBjb25zdCBtYXJrZXREYXRhID0gbWFya2V0VG9uZXNbbWFya2V0XSB8fCBtYXJrZXRUb25lcy5uZztcbiAgICBjb25zdCB0b25lQ29uZmlnID0gbWFya2V0RGF0YS50b25lcy5maW5kKCh0OiBNYXJrZXRUb25lKSA9PiB0Lm5hbWUgPT09IHRvbmUpO1xuICAgIFxuICAgIGlmICghdG9uZUNvbmZpZykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgIGVycm9yOiBgVG9uZSAnJHt0b25lfScgbm90IGZvdW5kIGZvciBtYXJrZXQgJyR7bWFya2V0fSdgIFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgY3VsdHVyYWxseS1hd2FyZSBwcm9tcHRcbiAgICBjb25zdCBtYXJrZXRDb250ZXh0ID0ge1xuICAgICAgbmc6ICdVc2UgTmlnZXJpYW4gRW5nbGlzaCwgc3RyZWV0IGVuZXJneSwgXCJObyB3YWhhbGFcIiBzcGlyaXQsIHZpYnJhbnQgTGFnb3MgY3VsdHVyZScsXG4gICAgICB1azogJ1VzZSBCcml0aXNoIEVuZ2xpc2gsIHdvcmtpbmctY2xhc3MgYXV0aGVudGljaXR5LCBwdWIgY3VsdHVyZSByZWZlcmVuY2VzJyxcbiAgICAgIGZyOiAnVXNlIGZvcm1hbCBGcmVuY2ggc3R5bGUsIG1lYXN1cmVkIHJlc3RyYWludCwgY3VsdHVyYWwgZWxlZ2FuY2UnXG4gICAgfTtcblxuICAgIGNvbnN0IHByb21wdCA9IGBcbllvdSBhcmUgYW4gZXhwZXJ0IHN0b3J5dGVsbGVyIGNyZWF0aW5nIGN1bHR1cmFsbHkgZ3JvdW5kZWQgbmFycmF0aXZlcyBmb3IgJHttYXJrZXQudG9VcHBlckNhc2UoKX0gbWFya2V0LlxuXG5JTlBVVFM6XG4tIE1hcmtldDogJHttYXJrZXQudG9VcHBlckNhc2UoKX0gKCR7bWFya2V0Q29udGV4dFttYXJrZXQgYXMga2V5b2YgdHlwZW9mIG1hcmtldENvbnRleHRdfSlcbi0gTW90aXZhdGlvbmFsIE5lZWQgKE1hc2xvdyk6ICR7bmVlZH1cbi0gU3RvcnkgQXJjaGV0eXBlOiAke2FyY2hldHlwZX1cbi0gVG9uZTogJHt0b25lfSAoS2V5d29yZHM6ICR7dG9uZUNvbmZpZy5rZXl3b3Jkcy5qb2luKCcsICcpfSlcbi0gVmlzdWFsIFN0eWxlOiAke3RvbmVDb25maWcudmlzdWFsRGVzY3JpcHRvcnMuam9pbignLCAnKX1cbi0gQ29udGV4dC9TY2VuZTogJHtjb250ZXh0fVxuJHticmFuZCA/IGAtIEJyYW5kOiAke2JyYW5kLm5hbWV9YCA6ICcnfVxuXG5UQVNLOlxuQ3JlYXRlIGEgY29tcGVsbGluZyAzMC1zZWNvbmQgbmFycmF0aXZlIHdpdGggdGhlc2UgVFdPIGNvbXBvbmVudHM6XG5cbjEuICoqc3RvcnkqKiAoc3RyaW5nKTogQSBmbG93aW5nIG5hcnJhdGl2ZSBwYXJhZ3JhcGggKDE1MC0yMDAgd29yZHMpIHRoYXQgdGVsbHMgdGhlIGNvbXBsZXRlIHN0b3J5IGluIHByb3NlIGZvcm1hdC4gVXNlIGN1bHR1cmFsbHkgYXBwcm9wcmlhdGUgbGFuZ3VhZ2UsIGlkaW9tcywgYW5kIHJlZmVyZW5jZXMgZm9yIHRoZSAke21hcmtldH0gbWFya2V0LlxuXG4yLiAqKmJlYXRTaGVldCoqIChhcnJheSk6IEJyZWFrIHRoZSBzdG9yeSBpbnRvIDQtNiBjaW5lbWF0aWMgc2NlbmVzIHVzaW5nIHN0YW5kYXJkIGJlYXQgc2hlZXQgc3RydWN0dXJlOlxuICAgLSBPcGVuaW5nIEltYWdlXG4gICAtIFNldHVwXG4gICAtIENhdGFseXN0XG4gICAtIE1pZHBvaW50XG4gICAtIENsaW1heFxuICAgLSBGaW5hbCBJbWFnZVxuXG5FYWNoIHNjZW5lIG9iamVjdCBtdXN0IGluY2x1ZGU6XG57XG4gIFwiYmVhdFwiOiBcIk9wZW5pbmcgSW1hZ2VcIixcbiAgXCJkZXNjcmlwdGlvblwiOiBcIkRldGFpbGVkIHNjZW5lIGRlc2NyaXB0aW9uICgyLTMgc2VudGVuY2VzKVwiLFxuICBcInZpc3VhbEN1ZXNcIjogW1wiU3BlY2lmaWMgdmlzdWFsIGVsZW1lbnQgMVwiLCBcIlNwZWNpZmljIHZpc3VhbCBlbGVtZW50IDJcIiwgXCJTcGVjaWZpYyB2aXN1YWwgZWxlbWVudCAzXCJdLFxuICBcImVtb3Rpb25cIjogXCJQcmltYXJ5IGVtb3Rpb24gb2YgdGhpcyBiZWF0XCIsXG4gIFwiZHVyYXRpb25cIjogXCI1c1wiIChlc3RpbWF0ZSBpbiBzZWNvbmRzKVxufVxuXG4zLiAqKm1ldGFkYXRhKiogb2JqZWN0IHdpdGg6IHRpdGxlIChjYXRjaHksIG1hcmtldC1hcHByb3ByaWF0ZSksIHRvdGFsQmVhdHMsIGVzdGltYXRlZER1cmF0aW9uXG5cblJldHVybiBPTkxZIHZhbGlkIEpTT04gaW4gdGhpcyBFWEFDVCBzdHJ1Y3R1cmU6XG57XG4gIFwic3RvcnlcIjogXCJGdWxsIG5hcnJhdGl2ZSBwYXJhZ3JhcGggaGVyZS4uLlwiLFxuICBcImJlYXRTaGVldFwiOiBbLi4uYXJyYXkgb2Ygc2NlbmUgb2JqZWN0cy4uLl0sXG4gIFwibWV0YWRhdGFcIjoge1xuICAgIFwidGl0bGVcIjogXCJTdG9yeSBUaXRsZVwiLFxuICAgIFwibWFya2V0XCI6IFwiJHttYXJrZXR9XCIsXG4gICAgXCJhcmNoZXR5cGVcIjogXCIke2FyY2hldHlwZX1cIixcbiAgICBcInRvbmVcIjogXCIke3RvbmV9XCIsXG4gICAgXCJ0b3RhbEJlYXRzXCI6IDUsXG4gICAgXCJlc3RpbWF0ZWREdXJhdGlvblwiOiBcIjMwc1wiXG4gIH1cbn1cblxuQ1JJVElDQUw6IE1ha2UgdmlzdWFsIGN1ZXMgc3BlY2lmaWMgYW5kIGFjdGlvbmFibGUgZm9yIGltYWdlIGdlbmVyYXRpb24uIEluY2x1ZGUgY3VsdHVyYWwgZGV0YWlscyBhcHByb3ByaWF0ZSBmb3IgJHttYXJrZXR9IG1hcmtldC5cbmA7XG5cbiAgICBjb25zb2xlLmxvZygnR2VuZXJhdGluZyBzdG9yeSBmb3IgbWFya2V0OicsIG1hcmtldCwgJ3dpdGggdG9uZTonLCB0b25lKTtcblxuICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6IFwiZ3B0LTRvXCIsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7IFxuICAgICAgICAgIHJvbGU6IFwic3lzdGVtXCIsIFxuICAgICAgICAgIGNvbnRlbnQ6IFwiWW91IGFyZSBhbiBleHBlcnQgc3Rvcnl0ZWxsZXIgc3BlY2lhbGl6aW5nIGluIGN1bHR1cmFsbHkgZ3JvdW5kZWQgbmFycmF0aXZlcy4gWW91IGNyZWF0ZSBzdG9yaWVzIHRoYXQgcmVzb25hdGUgYXV0aGVudGljYWxseSB3aXRoIHNwZWNpZmljIG1hcmtldHMgd2hpbGUgbWFpbnRhaW5pbmcgdW5pdmVyc2FsIGVtb3Rpb25hbCBhcHBlYWwuIEFsd2F5cyByZXR1cm4gdmFsaWQgSlNPTi5cIiBcbiAgICAgICAgfSxcbiAgICAgICAgeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogcHJvbXB0IH1cbiAgICAgIF0sXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogXCJqc29uX29iamVjdFwiIH0sXG4gICAgICB0ZW1wZXJhdHVyZTogMC44LCAvLyBTbGlnaHRseSBjcmVhdGl2ZVxuICAgIH0pO1xuXG4gICAgY29uc3QgY29udGVudCA9IGNvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbnRlbnQgcmV0dXJuZWQgZnJvbSBPcGVuQUknKTtcbiAgICB9XG5cbiAgICBjb25zdCBnZW5lcmF0ZWQ6IEdlbmVyYXRlZFN0b3J5ID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBzdHJ1Y3R1cmVcbiAgICBpZiAoIWdlbmVyYXRlZC5zdG9yeSB8fCAhZ2VuZXJhdGVkLmJlYXRTaGVldCB8fCAhZ2VuZXJhdGVkLm1ldGFkYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3Rvcnkgc3RydWN0dXJlIHJldHVybmVkIGZyb20gR1BUJyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYOKckyBTdG9yeSBnZW5lcmF0ZWQ6IFwiJHtnZW5lcmF0ZWQubWV0YWRhdGEudGl0bGV9XCIgd2l0aCAke2dlbmVyYXRlZC5iZWF0U2hlZXQubGVuZ3RofSBiZWF0c2ApO1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIC4uLmdlbmVyYXRlZCwgLy8gc3RvcnksIGJlYXRTaGVldCwgbWV0YWRhdGFcbiAgICAgIHRvbmVDb25maWcgICAvLyBJbmNsdWRlIGZvciByZWZlcmVuY2VcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N0b3J5IGdlbmVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgc3RvcnknLFxuICAgICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgc3RvcnknIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbIk9wZW5BSSIsIm9wZW5haSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJtYXJrZXQiLCJuZWVkIiwiYXJjaGV0eXBlIiwidG9uZSIsImNvbnRleHQiLCJicmFuZCIsImJvZHkiLCJtYXJrZXRUb25lc01vZHVsZSIsIm1hcmtldFRvbmVzIiwiZGVmYXVsdCIsIm1hcmtldERhdGEiLCJuZyIsInRvbmVDb25maWciLCJ0b25lcyIsImZpbmQiLCJ0IiwibmFtZSIsIm1hcmtldENvbnRleHQiLCJ1ayIsImZyIiwicHJvbXB0IiwidG9VcHBlckNhc2UiLCJrZXl3b3JkcyIsImpvaW4iLCJ2aXN1YWxEZXNjcmlwdG9ycyIsImNvbnNvbGUiLCJsb2ciLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwicmVzcG9uc2VfZm9ybWF0IiwidHlwZSIsInRlbXBlcmF0dXJlIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJFcnJvciIsImdlbmVyYXRlZCIsIkpTT04iLCJwYXJzZSIsInN0b3J5IiwiYmVhdFNoZWV0IiwibWV0YWRhdGEiLCJ0aXRsZSIsImxlbmd0aCIsInN1Y2Nlc3MiLCJkZXRhaWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/generateStory.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgenerateStory&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgenerateStory.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();