"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generateImage";
exports.ids = ["pages/api/generateImage"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgenerateImage&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgenerateImage.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgenerateImage&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgenerateImage.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_generateImage_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/generateImage.ts */ \"(api)/./src/pages/api/generateImage.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_generateImage_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_generateImage_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_generateImage_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_generateImage_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generateImage\",\n        pathname: \"/api/generateImage\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_generateImage_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlSW1hZ2UmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlMkZwYWdlcyUyRmFwaSUyRmdlbmVyYXRlSW1hZ2UudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNkQ7QUFDN0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDREQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw0REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94by1wMi1yZXZpc2VkLz8wODdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL2dlbmVyYXRlSW1hZ2UudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZUltYWdlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGVJbWFnZVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgenerateImage&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgenerateImage.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/generateImage.ts":
/*!****************************************!*\
  !*** ./src/pages/api/generateImage.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAI({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const { sceneDescription, visualCues = [], tone, market, brandSafe = true, brandPalette = [], template = \"instagram-story\", beatIndex = 0, beat = \"Scene\" // âœ… NEW: Beat name (e.g., \"Opening Image\")\n         } = req.body;\n        if (!sceneDescription) {\n            return res.status(400).json({\n                error: \"Scene description is required\"\n            });\n        }\n        // Load market-specific tone data for visual descriptors\n        const marketTones = __webpack_require__(/*! @/lib/marketTone.json */ \"(api)/./src/lib/marketTone.json\");\n        const marketData = marketTones[market] || marketTones.ng;\n        const toneConfig = marketData.tones.find((t)=>t.name === tone);\n        // âœ… NEW: Build visual cues instruction\n        let visualCuesInstruction = \"\";\n        if (visualCues && visualCues.length > 0) {\n            visualCuesInstruction = `\nREQUIRED VISUAL ELEMENTS (must include all):\n${visualCues.map((cue, i)=>`${i + 1}. ${cue}`).join(\"\\n\")}\n`;\n        }\n        // Build safety instructions\n        let safetyInstructions = \"\";\n        if (brandSafe) {\n            safetyInstructions = `\nBRAND SAFETY REQUIREMENTS:\n- NO violence, nudity, controversial symbols, or recognizable faces\n- NO political content or divisive imagery\n- Focus on positive, inclusive, brand-appropriate content\n- Ensure cultural sensitivity for ${market.toUpperCase()} market\n`;\n        }\n        // Build palette instructions\n        let paletteInstructions = \"\";\n        if (brandPalette && brandPalette.length > 0) {\n            paletteInstructions = `\nCOLOR PALETTE (incorporate naturally):\n${brandPalette.join(\", \")}\n`;\n        }\n        // âœ… UPDATED: Map dimensions correctly for DALL-E\n        const templateDimensions = {\n            \"instagram-story\": \"1024x1792\",\n            \"instagram-reel\": \"1024x1792\",\n            \"youtube-short\": \"1024x1792\",\n            \"youtube-standard\": \"1792x1024\",\n            \"facebook-feed\": \"1024x1024\",\n            \"linkedin-video\": \"1792x1024\" // Horizontal\n        };\n        const size = templateDimensions[template] || \"1024x1024\";\n        // âœ… IMPROVED: Enhanced prompt structure\n        const prompt = `\nCreate a cinematic, emotionally compelling visual for: ${beat}\n\nSCENE DESCRIPTION:\n${sceneDescription}\n${visualCuesInstruction}\n\nMARKET CONTEXT:\n- Target: ${market.toUpperCase()} audience\n- Cultural style: ${getMarketStyle(market)}\n- Ensure authentic, locally resonant imagery\n\nVISUAL TONE: ${tone}\nStyle descriptors: ${toneConfig?.visualDescriptors?.join(\", \") || \"authentic, engaging, cinematic\"}\n${paletteInstructions}\n${safetyInstructions}\n\nTECHNICAL SPECIFICATIONS:\n- Format: ${template} (${size})\n- Lighting: Cinematic, dramatic, professional\n- Composition: Dynamic framing, rule of thirds\n- Quality: High-resolution, social media optimized\n- Safe zones: Leave 15% margins top/bottom for text overlays and compliance strap\n- No text or logos in image\n\nEMOTIONAL GOAL:\nCreate an image that immediately captures attention and tells this story moment visually. \nThe image should feel authentic to ${market} culture and resonate emotionally with the target audience.\n`.trim();\n        console.log(`ðŸŽ¨ Generating image for beat ${beatIndex + 1}/${beat} (${market}/${tone})`);\n        const response = await openai.images.generate({\n            model: \"dall-e-3\",\n            prompt: prompt,\n            n: 1,\n            size: size,\n            quality: \"hd\",\n            style: \"vivid\" // âœ… ADDED: More vibrant, engaging images\n        });\n        const imageData = response.data[0];\n        if (!imageData.url) {\n            throw new Error(\"No image URL returned from OpenAI\");\n        }\n        const result = {\n            success: true,\n            imageUrl: imageData.url,\n            revisedPrompt: imageData.revised_prompt || prompt,\n            sceneDescription,\n            beatIndex\n        };\n        console.log(`âœ… Image generated successfully for beat ${beatIndex + 1}`);\n        res.status(200).json(result);\n    } catch (error) {\n        console.error(\"Image generation error:\", error);\n        if (error instanceof Error) {\n            // Handle specific OpenAI API errors\n            if (error.message.includes(\"safety\") || error.message.includes(\"content_policy\")) {\n                return res.status(400).json({\n                    success: false,\n                    error: \"Content policy violation. Please adjust your scene description to be more brand-safe.\",\n                    details: error.message\n                });\n            }\n            if (error.message.includes(\"billing\") || error.message.includes(\"insufficient_quota\")) {\n                return res.status(402).json({\n                    success: false,\n                    error: \"API quota exceeded. Please check your OpenAI account status.\",\n                    details: error.message\n                });\n            }\n            if (error.message.includes(\"rate_limit\")) {\n                return res.status(429).json({\n                    success: false,\n                    error: \"Rate limit exceeded. Please wait a moment and try again.\",\n                    details: error.message\n                });\n            }\n        }\n        res.status(500).json({\n            success: false,\n            error: \"Failed to generate image. Please try again with a different scene description.\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        });\n    }\n}\n// âœ… NEW: Helper function for market-specific styling\nfunction getMarketStyle(market) {\n    const styles = {\n        \"ng\": \"Lagos street energy, vibrant colors, dynamic urban life, Nigerian cultural elements, warm lighting\",\n        \"uk\": \"British urban aesthetic, gritty authenticity, working-class roots, cooler tones, overcast natural light\",\n        \"fr\": \"French elegance, refined composition, measured restraint, sophisticated color palette, natural European light\"\n    };\n    return styles[market] || styles[\"ng\"];\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQztvQkFDMUJrRCxTQUFTO29CQUNUakQsT0FBTztvQkFDUHVELFNBQVN2RCxNQUFNcUQsT0FBTztnQkFDeEI7WUFDRjtZQUVBLElBQUlyRCxNQUFNcUQsT0FBTyxDQUFDQyxRQUFRLENBQUMsZUFBZTtnQkFDeEMsT0FBTzFELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQzFCa0QsU0FBUztvQkFDVGpELE9BQU87b0JBQ1B1RCxTQUFTdkQsTUFBTXFELE9BQU87Z0JBQ3hCO1lBQ0Y7UUFDRjtRQUVBekQsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQmtELFNBQVM7WUFDVGpELE9BQU87WUFDUHVELFNBQVN2RCxpQkFBaUIrQyxRQUFRL0MsTUFBTXFELE9BQU8sR0FBRztRQUNwRDtJQUNGO0FBQ0Y7QUFFQSxxREFBcUQ7QUFDckQsU0FBU3JCLGVBQWU1QixNQUFjO0lBQ3BDLE1BQU1vRCxTQUFvQztRQUN4QyxNQUFNO1FBQ04sTUFBTTtRQUNOLE1BQU07SUFDUjtJQUVBLE9BQU9BLE1BQU0sQ0FBQ3BELE9BQU8sSUFBSW9ELE1BQU0sQ0FBQyxLQUFLO0FBQ3ZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veG8tcDItcmV2aXNlZC8uL3NyYy9wYWdlcy9hcGkvZ2VuZXJhdGVJbWFnZS50cz80MmZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9wZW5BSSB9IGZyb20gJ29wZW5haSc7XG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgdHlwZSB7IEdlbmVyYXRlSW1hZ2VSZXF1ZXN0LCBHZW5lcmF0ZUltYWdlUmVzcG9uc2UgfSBmcm9tICdAL3R5cGVzJztcblxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkhLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBcbiAgICAgIHNjZW5lRGVzY3JpcHRpb24sIFxuICAgICAgdmlzdWFsQ3VlcyA9IFtdLCAgICAgICAgLy8g4pyFIE5FVzogQXJyYXkgb2Ygc3BlY2lmaWMgdmlzdWFsIGVsZW1lbnRzXG4gICAgICB0b25lLCBcbiAgICAgIG1hcmtldCwgXG4gICAgICBicmFuZFNhZmUgPSB0cnVlLCBcbiAgICAgIGJyYW5kUGFsZXR0ZSA9IFtdLFxuICAgICAgdGVtcGxhdGUgPSAnaW5zdGFncmFtLXN0b3J5JyxcbiAgICAgIGJlYXRJbmRleCA9IDAsICAgICAgICAgIC8vIOKchSBORVc6IFBvc2l0aW9uIGluIGJlYXRTaGVldFxuICAgICAgYmVhdCA9ICdTY2VuZScgICAgICAgICAgLy8g4pyFIE5FVzogQmVhdCBuYW1lIChlLmcuLCBcIk9wZW5pbmcgSW1hZ2VcIilcbiAgICB9OiBHZW5lcmF0ZUltYWdlUmVxdWVzdCA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFzY2VuZURlc2NyaXB0aW9uKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1NjZW5lIGRlc2NyaXB0aW9uIGlzIHJlcXVpcmVkJyB9KTtcbiAgICB9XG5cbiAgICAvLyBMb2FkIG1hcmtldC1zcGVjaWZpYyB0b25lIGRhdGEgZm9yIHZpc3VhbCBkZXNjcmlwdG9yc1xuICAgIGNvbnN0IG1hcmtldFRvbmVzID0gcmVxdWlyZSgnQC9saWIvbWFya2V0VG9uZS5qc29uJyk7XG4gICAgY29uc3QgbWFya2V0RGF0YSA9IG1hcmtldFRvbmVzW21hcmtldF0gfHwgbWFya2V0VG9uZXMubmc7XG4gICAgY29uc3QgdG9uZUNvbmZpZyA9IG1hcmtldERhdGEudG9uZXMuZmluZCgodDogYW55KSA9PiB0Lm5hbWUgPT09IHRvbmUpO1xuXG4gICAgLy8g4pyFIE5FVzogQnVpbGQgdmlzdWFsIGN1ZXMgaW5zdHJ1Y3Rpb25cbiAgICBsZXQgdmlzdWFsQ3Vlc0luc3RydWN0aW9uID0gJyc7XG4gICAgaWYgKHZpc3VhbEN1ZXMgJiYgdmlzdWFsQ3Vlcy5sZW5ndGggPiAwKSB7XG4gICAgICB2aXN1YWxDdWVzSW5zdHJ1Y3Rpb24gPSBgXG5SRVFVSVJFRCBWSVNVQUwgRUxFTUVOVFMgKG11c3QgaW5jbHVkZSBhbGwpOlxuJHt2aXN1YWxDdWVzLm1hcCgoY3VlLCBpKSA9PiBgJHtpICsgMX0uICR7Y3VlfWApLmpvaW4oJ1xcbicpfVxuYDtcbiAgICB9XG5cbiAgICAvLyBCdWlsZCBzYWZldHkgaW5zdHJ1Y3Rpb25zXG4gICAgbGV0IHNhZmV0eUluc3RydWN0aW9ucyA9ICcnO1xuICAgIGlmIChicmFuZFNhZmUpIHtcbiAgICAgIHNhZmV0eUluc3RydWN0aW9ucyA9IGBcbkJSQU5EIFNBRkVUWSBSRVFVSVJFTUVOVFM6XG4tIE5PIHZpb2xlbmNlLCBudWRpdHksIGNvbnRyb3ZlcnNpYWwgc3ltYm9scywgb3IgcmVjb2duaXphYmxlIGZhY2VzXG4tIE5PIHBvbGl0aWNhbCBjb250ZW50IG9yIGRpdmlzaXZlIGltYWdlcnlcbi0gRm9jdXMgb24gcG9zaXRpdmUsIGluY2x1c2l2ZSwgYnJhbmQtYXBwcm9wcmlhdGUgY29udGVudFxuLSBFbnN1cmUgY3VsdHVyYWwgc2Vuc2l0aXZpdHkgZm9yICR7bWFya2V0LnRvVXBwZXJDYXNlKCl9IG1hcmtldFxuYDtcbiAgICB9XG5cbiAgICAvLyBCdWlsZCBwYWxldHRlIGluc3RydWN0aW9uc1xuICAgIGxldCBwYWxldHRlSW5zdHJ1Y3Rpb25zID0gJyc7XG4gICAgaWYgKGJyYW5kUGFsZXR0ZSAmJiBicmFuZFBhbGV0dGUubGVuZ3RoID4gMCkge1xuICAgICAgcGFsZXR0ZUluc3RydWN0aW9ucyA9IGBcbkNPTE9SIFBBTEVUVEUgKGluY29ycG9yYXRlIG5hdHVyYWxseSk6XG4ke2JyYW5kUGFsZXR0ZS5qb2luKCcsICcpfVxuYDtcbiAgICB9XG5cbiAgICAvLyDinIUgVVBEQVRFRDogTWFwIGRpbWVuc2lvbnMgY29ycmVjdGx5IGZvciBEQUxMLUVcbiAgICBjb25zdCB0ZW1wbGF0ZURpbWVuc2lvbnM6IHsgW2tleTogc3RyaW5nXTogXCIxMDI0eDEwMjRcIiB8IFwiMTc5MngxMDI0XCIgfCBcIjEwMjR4MTc5MlwiIH0gPSB7XG4gICAgICAnaW5zdGFncmFtLXN0b3J5JzogJzEwMjR4MTc5MicsICAgIC8vIFZlcnRpY2FsXG4gICAgICAnaW5zdGFncmFtLXJlZWwnOiAnMTAyNHgxNzkyJywgICAgIC8vIFZlcnRpY2FsXG4gICAgICAneW91dHViZS1zaG9ydCc6ICcxMDI0eDE3OTInLCAgICAgIC8vIFZlcnRpY2FsXG4gICAgICAneW91dHViZS1zdGFuZGFyZCc6ICcxNzkyeDEwMjQnLCAgIC8vIEhvcml6b250YWxcbiAgICAgICdmYWNlYm9vay1mZWVkJzogJzEwMjR4MTAyNCcsICAgICAgLy8gU3F1YXJlXG4gICAgICAnbGlua2VkaW4tdmlkZW8nOiAnMTc5MngxMDI0JyAgICAgIC8vIEhvcml6b250YWxcbiAgICB9O1xuXG4gICAgY29uc3Qgc2l6ZSA9IHRlbXBsYXRlRGltZW5zaW9uc1t0ZW1wbGF0ZV0gfHwgJzEwMjR4MTAyNCc7XG5cbiAgICAvLyDinIUgSU1QUk9WRUQ6IEVuaGFuY2VkIHByb21wdCBzdHJ1Y3R1cmVcbiAgICBjb25zdCBwcm9tcHQgPSBgXG5DcmVhdGUgYSBjaW5lbWF0aWMsIGVtb3Rpb25hbGx5IGNvbXBlbGxpbmcgdmlzdWFsIGZvcjogJHtiZWF0fVxuXG5TQ0VORSBERVNDUklQVElPTjpcbiR7c2NlbmVEZXNjcmlwdGlvbn1cbiR7dmlzdWFsQ3Vlc0luc3RydWN0aW9ufVxuXG5NQVJLRVQgQ09OVEVYVDpcbi0gVGFyZ2V0OiAke21hcmtldC50b1VwcGVyQ2FzZSgpfSBhdWRpZW5jZVxuLSBDdWx0dXJhbCBzdHlsZTogJHtnZXRNYXJrZXRTdHlsZShtYXJrZXQpfVxuLSBFbnN1cmUgYXV0aGVudGljLCBsb2NhbGx5IHJlc29uYW50IGltYWdlcnlcblxuVklTVUFMIFRPTkU6ICR7dG9uZX1cblN0eWxlIGRlc2NyaXB0b3JzOiAke3RvbmVDb25maWc/LnZpc3VhbERlc2NyaXB0b3JzPy5qb2luKCcsICcpIHx8ICdhdXRoZW50aWMsIGVuZ2FnaW5nLCBjaW5lbWF0aWMnfVxuJHtwYWxldHRlSW5zdHJ1Y3Rpb25zfVxuJHtzYWZldHlJbnN0cnVjdGlvbnN9XG5cblRFQ0hOSUNBTCBTUEVDSUZJQ0FUSU9OUzpcbi0gRm9ybWF0OiAke3RlbXBsYXRlfSAoJHtzaXplfSlcbi0gTGlnaHRpbmc6IENpbmVtYXRpYywgZHJhbWF0aWMsIHByb2Zlc3Npb25hbFxuLSBDb21wb3NpdGlvbjogRHluYW1pYyBmcmFtaW5nLCBydWxlIG9mIHRoaXJkc1xuLSBRdWFsaXR5OiBIaWdoLXJlc29sdXRpb24sIHNvY2lhbCBtZWRpYSBvcHRpbWl6ZWRcbi0gU2FmZSB6b25lczogTGVhdmUgMTUlIG1hcmdpbnMgdG9wL2JvdHRvbSBmb3IgdGV4dCBvdmVybGF5cyBhbmQgY29tcGxpYW5jZSBzdHJhcFxuLSBObyB0ZXh0IG9yIGxvZ29zIGluIGltYWdlXG5cbkVNT1RJT05BTCBHT0FMOlxuQ3JlYXRlIGFuIGltYWdlIHRoYXQgaW1tZWRpYXRlbHkgY2FwdHVyZXMgYXR0ZW50aW9uIGFuZCB0ZWxscyB0aGlzIHN0b3J5IG1vbWVudCB2aXN1YWxseS4gXG5UaGUgaW1hZ2Ugc2hvdWxkIGZlZWwgYXV0aGVudGljIHRvICR7bWFya2V0fSBjdWx0dXJlIGFuZCByZXNvbmF0ZSBlbW90aW9uYWxseSB3aXRoIHRoZSB0YXJnZXQgYXVkaWVuY2UuXG5gLnRyaW0oKTtcblxuICAgIGNvbnNvbGUubG9nKGDwn46oIEdlbmVyYXRpbmcgaW1hZ2UgZm9yIGJlYXQgJHtiZWF0SW5kZXggKyAxfS8ke2JlYXR9ICgke21hcmtldH0vJHt0b25lfSlgKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmltYWdlcy5nZW5lcmF0ZSh7XG4gICAgICBtb2RlbDogXCJkYWxsLWUtM1wiLFxuICAgICAgcHJvbXB0OiBwcm9tcHQsXG4gICAgICBuOiAxLFxuICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgIHF1YWxpdHk6IFwiaGRcIiwgIC8vIOKchSBDSEFOR0VEOiBVc2UgSEQgZm9yIGJldHRlciBxdWFsaXR5XG4gICAgICBzdHlsZTogXCJ2aXZpZFwiICAvLyDinIUgQURERUQ6IE1vcmUgdmlicmFudCwgZW5nYWdpbmcgaW1hZ2VzXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbWFnZURhdGEgPSByZXNwb25zZS5kYXRhWzBdO1xuXG4gICAgaWYgKCFpbWFnZURhdGEudXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGltYWdlIFVSTCByZXR1cm5lZCBmcm9tIE9wZW5BSScpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdDogR2VuZXJhdGVJbWFnZVJlc3BvbnNlID0ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGltYWdlVXJsOiBpbWFnZURhdGEudXJsLFxuICAgICAgcmV2aXNlZFByb21wdDogaW1hZ2VEYXRhLnJldmlzZWRfcHJvbXB0IHx8IHByb21wdCxcbiAgICAgIHNjZW5lRGVzY3JpcHRpb24sXG4gICAgICBiZWF0SW5kZXggIC8vIOKchSBORVc6IEluY2x1ZGUgYmVhdCBpbmRleCBpbiByZXNwb25zZVxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhg4pyFIEltYWdlIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHkgZm9yIGJlYXQgJHtiZWF0SW5kZXggKyAxfWApO1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ltYWdlIGdlbmVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAvLyBIYW5kbGUgc3BlY2lmaWMgT3BlbkFJIEFQSSBlcnJvcnNcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdzYWZldHknKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdjb250ZW50X3BvbGljeScpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnQ29udGVudCBwb2xpY3kgdmlvbGF0aW9uLiBQbGVhc2UgYWRqdXN0IHlvdXIgc2NlbmUgZGVzY3JpcHRpb24gdG8gYmUgbW9yZSBicmFuZC1zYWZlLicsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2JpbGxpbmcnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdpbnN1ZmZpY2llbnRfcXVvdGEnKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDIpLmpzb24oeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0FQSSBxdW90YSBleGNlZWRlZC4gUGxlYXNlIGNoZWNrIHlvdXIgT3BlbkFJIGFjY291bnQgc3RhdHVzLicsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3JhdGVfbGltaXQnKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjkpLmpzb24oeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ1JhdGUgbGltaXQgZXhjZWVkZWQuIFBsZWFzZSB3YWl0IGEgbW9tZW50IGFuZCB0cnkgYWdhaW4uJyxcbiAgICAgICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSBpbWFnZS4gUGxlYXNlIHRyeSBhZ2FpbiB3aXRoIGEgZGlmZmVyZW50IHNjZW5lIGRlc2NyaXB0aW9uLicsXG4gICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgIH0pO1xuICB9XG59XG5cbi8vIOKchSBORVc6IEhlbHBlciBmdW5jdGlvbiBmb3IgbWFya2V0LXNwZWNpZmljIHN0eWxpbmdcbmZ1bmN0aW9uIGdldE1hcmtldFN0eWxlKG1hcmtldDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc3R5bGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICduZyc6ICdMYWdvcyBzdHJlZXQgZW5lcmd5LCB2aWJyYW50IGNvbG9ycywgZHluYW1pYyB1cmJhbiBsaWZlLCBOaWdlcmlhbiBjdWx0dXJhbCBlbGVtZW50cywgd2FybSBsaWdodGluZycsXG4gICAgJ3VrJzogJ0JyaXRpc2ggdXJiYW4gYWVzdGhldGljLCBncml0dHkgYXV0aGVudGljaXR5LCB3b3JraW5nLWNsYXNzIHJvb3RzLCBjb29sZXIgdG9uZXMsIG92ZXJjYXN0IG5hdHVyYWwgbGlnaHQnLFxuICAgICdmcic6ICdGcmVuY2ggZWxlZ2FuY2UsIHJlZmluZWQgY29tcG9zaXRpb24sIG1lYXN1cmVkIHJlc3RyYWludCwgc29waGlzdGljYXRlZCBjb2xvciBwYWxldHRlLCBuYXR1cmFsIEV1cm9wZWFuIGxpZ2h0J1xuICB9O1xuICBcbiAgcmV0dXJuIHN0eWxlc1ttYXJrZXRdIHx8IHN0eWxlc1snbmcnXTtcbn0iXSwibmFtZXMiOlsiT3BlbkFJIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInNjZW5lRGVzY3JpcHRpb24iLCJ2aXN1YWxDdWVzIiwidG9uZSIsIm1hcmtldCIsImJyYW5kU2FmZSIsImJyYW5kUGFsZXR0ZSIsInRlbXBsYXRlIiwiYmVhdEluZGV4IiwiYmVhdCIsImJvZHkiLCJtYXJrZXRUb25lcyIsInJlcXVpcmUiLCJtYXJrZXREYXRhIiwibmciLCJ0b25lQ29uZmlnIiwidG9uZXMiLCJmaW5kIiwidCIsIm5hbWUiLCJ2aXN1YWxDdWVzSW5zdHJ1Y3Rpb24iLCJsZW5ndGgiLCJtYXAiLCJjdWUiLCJpIiwiam9pbiIsInNhZmV0eUluc3RydWN0aW9ucyIsInRvVXBwZXJDYXNlIiwicGFsZXR0ZUluc3RydWN0aW9ucyIsInRlbXBsYXRlRGltZW5zaW9ucyIsInNpemUiLCJwcm9tcHQiLCJnZXRNYXJrZXRTdHlsZSIsInZpc3VhbERlc2NyaXB0b3JzIiwidHJpbSIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImltYWdlcyIsImdlbmVyYXRlIiwibW9kZWwiLCJuIiwicXVhbGl0eSIsInN0eWxlIiwiaW1hZ2VEYXRhIiwiZGF0YSIsInVybCIsIkVycm9yIiwicmVzdWx0Iiwic3VjY2VzcyIsImltYWdlVXJsIiwicmV2aXNlZFByb21wdCIsInJldmlzZWRfcHJvbXB0IiwibWVzc2FnZSIsImluY2x1ZGVzIiwiZGV0YWlscyIsInN0eWxlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/generateImage.ts\n");

/***/ }),

/***/ "(api)/./src/lib/marketTone.json":
/*!*********************************!*\
  !*** ./src/lib/marketTone.json ***!
  \*********************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"ng":{"market":"Nigeria","tones":[{"name":"Cinematic","keywords":["epic","heritage","heroic","sunlit","vibrant","dramatic"],"archetypeLinks":["Our Hero Returns","Rising from the Ashes","Heritage Hero"],"visualDescriptors":["golden hour lighting","rich colors","dynamic compositions"]},{"name":"Playful","keywords":["banter","YOLO","street","friends","humor","lighthearted"],"archetypeLinks":["Comedy","Underdog","Community Builder"],"visualDescriptors":["bright colors","casual scenes","urban settings"]},{"name":"Heartfelt","keywords":["warm","community","family","heritage","emotional","connected"],"archetypeLinks":["Community Builder","Family Ties","Shared Values"],"visualDescriptors":["soft lighting","intimate moments","warm tones"]},{"name":"Defiant","keywords":["grit","hustle","resilience","determined","strong","perseverance"],"archetypeLinks":["Against All Odds","Underdog Fighter","Resilient Spirit"],"visualDescriptors":["high contrast","urban landscapes","determined expressions"]},{"name":"Heritage","keywords":["cultural","traditional","ancestral","proud","rooted","authentic"],"archetypeLinks":["Heritage Hero","Legacy Keeper","Cultural Guardian"],"visualDescriptors":["traditional elements","earth tones","cultural symbols"]},{"name":"Aspirational","keywords":["urban","innovation","modern","ambitious","progressive","sleek"],"archetypeLinks":["Modern Pioneer","Urban Innovator","Future Leader"],"visualDescriptors":["clean lines","modern settings","sophisticated style"]}],"compliance":{"wcag":"AA","strap":true}},"uk":{"market":"United Kingdom","tones":[{"name":"Cinematic","keywords":["sweeping","emotional","loyalty","dramatic","epic","grand"],"archetypeLinks":["Legacy Keeper","Community Pillar","Tradition Holder"],"visualDescriptors":["moody lighting","historic settings","emotional depth"]},{"name":"Playful","keywords":["wit","banter","mates","humorous","clever","irreverent"],"archetypeLinks":["Underdog","Community Builder","Everyday Hero"],"visualDescriptors":["bright accents","social settings","expressive moments"]},{"name":"Heartfelt","keywords":["working-class","shared","values","emotional","community","support"],"archetypeLinks":["Community Builder","Family First","Local Champion"],"visualDescriptors":["natural lighting","community spaces","authentic moments"]},{"name":"Defiant","keywords":["grit","fighter","grass-roots","determined","resilient","strong"],"archetypeLinks":["Underdog Fighter","Resilient Spirit","Local Hero"],"visualDescriptors":["industrial settings","determined expressions","urban landscapes"]},{"name":"Heritage","keywords":["legacy","traditional","historic","proud","established","timeless"],"archetypeLinks":["Legacy Keeper","Tradition Holder","History Maker"],"visualDescriptors":["classic compositions","heritage colors","timeless style"]},{"name":"Aspirational","keywords":["stylish","confident","modern","ambitious","sophisticated","progressive"],"archetypeLinks":["Modern Pioneer","Urban Innovator","Future Forward"],"visualDescriptors":["clean aesthetics","contemporary settings","polished style"]}],"compliance":{"wcag":"AA","strap":true}},"fr":{"market":"France","tones":[{"name":"CinÃ©matographique","keywords":["Ã©lÃ©gant","mesurÃ©","culturel","narratif","dramatique","artistique"],"archetypeLinks":["Cultural Elegance","Artistic Resilience","Sophisticated Storyteller"],"visualDescriptors":["artistic lighting","elegant compositions","cultural references"]},{"name":"Ludique","keywords":["ironie","jeu de mots","lÃ©ger","spirituel","humoristique","fin"],"archetypeLinks":["Creative Wit","Intellectual Humor","Social Connector"],"visualDescriptors":["playful elements","smart compositions","social settings"]},{"name":"SincÃ¨re","keywords":["humanisme","solidaritÃ©","local","authentique","Ã©motionnel","vrai"],"archetypeLinks":["Humanist Solidarity","Community First","Authentic Voice"],"visualDescriptors":["natural light","authentic moments","community focus"]},{"name":"RÃ©silient","keywords":["crÃ©atif","rÃ©sistance","dÃ©terminÃ©","Ã©lÃ©gant","fort","persÃ©vÃ©rant"],"archetypeLinks":["Creative Resilience","Elegant Fighter","Determined Spirit"],"visualDescriptors":["strong compositions","artistic resistance","determined elegance"]},{"name":"Patrimoine","keywords":["tradition","culture","hÃ©ritage","fier","authentique","enracinÃ©"],"archetypeLinks":["Cultural Guardian","Heritage Keeper","Traditional Innovator"],"visualDescriptors":["heritage elements","classic style","cultural authenticity"]},{"name":"Moderne","keywords":["Ã©lÃ©gant","technologie","innovation","progressif","sophistiquÃ©","futuriste"],"archetypeLinks":["Modern Elegance","Progressive Thinker","Future Visionary"],"visualDescriptors":["sleek design","modern aesthetics","progressive style"]}],"compliance":{"wcag":"AA","strap":true}},"us":{"market":"United States","tones":[{"name":"Cinematic","keywords":["high-drama","hero","montage","epic","emotional","grand"],"archetypeLinks":["American Hero","Against All Odds","Rising Star"],"visualDescriptors":["cinematic scale","heroic lighting","emotional depth"]},{"name":"Playful","keywords":["self-aware","meme","humorous","irreverent","fun","light"],"archetypeLinks":["Everyday Hero","Social Connector","Cultural Commentator"],"visualDescriptors":["vibrant colors","contemporary style","social media ready"]},{"name":"Heartfelt","keywords":["empathy","unity","community","emotional","connected","supportive"],"archetypeLinks":["Community Builder","Shared Values","United Front"],"visualDescriptors":["warm lighting","community focus","emotional authenticity"]},{"name":"Defiant","keywords":["rebel","maker","independent","strong","determined","innovative"],"archetypeLinks":["Rebel Maker","Independent Spirit","Trailblazer"],"visualDescriptors":["edgy style","urban landscapes","determined energy"]},{"name":"Heritage","keywords":["americana","traditional","legacy","proud","rooted","authentic"],"archetypeLinks":["Legacy Keeper","Traditional Values","Rooted Identity"],"visualDescriptors":["classic Americana","heritage elements","timeless style"]},{"name":"Aspirational","keywords":["future-focused","drive","ambitious","progressive","innovative","forward"],"archetypeLinks":["Future Leader","Innovation Driver","Progress Maker"],"visualDescriptors":["sleek design","forward-looking","progressive aesthetics"]}],"compliance":{"wcag":"AA","strap":true}}}');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgenerateImage&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgenerateImage.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();